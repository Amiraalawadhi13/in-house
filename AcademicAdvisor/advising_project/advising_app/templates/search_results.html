{% extends 'base.html' %}
{% block title %}Search Results{% endblock %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
{% block content %}

<head>
    <meta charset="UTF-8">
    <title>Search Results</title>
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet">

</head>

<body>
    <div class="container py-4">
        <!-- Search Bar -->
        <h1 class="mb-4">Filter your search</h1>
        <div class="mb-5">
            <form action="{% url 'search' %}" method="get" class="input-group">
                <input class="form-control mr-sm-2" type="text" name="q" id="search-input" placeholder="Search"
                    value="{{ query }}">
                <input type="number" name="year" placeholder="Year" class="form-control">
                <select name="semester" class="form-control">
                    <option value="">Semester</option>
                    <option value="semesterA">Semester A</option>
                    <option value="semesterB">Semester B</option>
                </select>
                <input type="number" name="credits" placeholder="Credits" class="form-control">
                <div class="input-group-append">
                    <button type="submit" class="btn btn-primary">Search</button>
                </div>
            </form>
        </div>

        <!-- Search Results -->
        <h2 class="mb-3">Search Results for <span class="search-query">"{{ query }}"</span></h2>
        {% if schools or majors or courses %}
        <div class="search-results mb-4">
            {% if schools %}
            <div class="result-category">
                <h2><i class="fas fa-school icon"></i>Schools</h2>
                <ul class="result-list">
                    {% for school in schools %}
                    <li><a href="{% url 'majors' school.id %}">{{ school.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            {% if majors %}
            <div class="result-category">
                <h2><i class="fas fa-graduation-cap icon"></i>Majors</h2>
                <ul class="result-list">
                    {% for major in majors %}
                    <li><a href="{% url 'major_detail' major.id %}">{{ major.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            {% if courses %}
            <div class="result-category">
                <h2><i class="fas fa-book-open icon"></i>Courses</h2>
                <ul class="result-list">
                    {% for course in courses %}
                    <li><a href="{% url 'course_detail' course.id %}">{{ course.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
        {% else %}
        <div class="no-results">
            <p>No results found for "{{ query }}".</p>
        </div>
        {% endif %}
        <div class="mt-5">
        {% if is_tutor %}
        <a href="{% url 'tutor_dashboard_view' %}" class="btn btn-outline-secondary">Return to Tutor Dashboard</a>
        {% else %}
        <a href="{% url 'student_dashboard_view' %}" class="btn btn-outline-secondary">Return to Student Dashboard</a>
        {% endif %}
    </div>
    </div>
    
    </div>
{% endblock %}

</html>